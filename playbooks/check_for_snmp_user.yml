---
- name: configure snmp for routers
  gather_facts: no
  hosts: routers
  connection: network_cli
  tasks:
    - name: register output as a variable
      ios_command:
        commands: show snmp user
      register: stuff

    - name: debug the output
      debug:
        msg: NOT COMPLIANT
      when: '(stuff.stdout_lines[0][0] != "User name: test_user") or 
             (stuff.stdout_lines[0][3] != "Authentication Protocol: None") or 
             (stuff.stdout_lines[0][4] != "Privacy Protocol: None") or 
             (stuff.stdout_lines[0][5] != "Group-name: test_group")'